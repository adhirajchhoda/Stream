# Stream Protocol Attestation Service Environment Configuration

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Port for the HTTP server
PORT=3001

# Node environment (development, production, test)
NODE_ENV=development

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Allowed origins for CORS (comma-separated)
# Use '*' for development, specific domains for production
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# Admin key for restricted operations
# Generate a secure random string for production
ADMIN_KEY=stream_admin_key_replace_in_production

# JWT secret for token signing (if using JWT authentication)
JWT_SECRET=your_jwt_secret_here

# Encryption key for sensitive data
ENCRYPTION_KEY=your_encryption_key_here

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================

# Standard API rate limit (requests per 15 minutes)
RATE_LIMIT_STANDARD=100

# Attestation creation rate limit (requests per minute)
RATE_LIMIT_ATTESTATION=10

# Verification rate limit (requests per minute)
RATE_LIMIT_VERIFICATION=50

# Employer registration rate limit (requests per hour)
RATE_LIMIT_REGISTRATION=5

# =============================================================================
# DATABASE CONFIGURATION (for production)
# =============================================================================

# Database URL (PostgreSQL recommended)
DATABASE_URL=postgresql://user:password@localhost:5432/stream_attestations

# Database connection pool settings
DB_POOL_MIN=2
DB_POOL_MAX=20
DB_POOL_IDLE_TIMEOUT=30000

# =============================================================================
# REDIS CONFIGURATION (for caching and rate limiting)
# =============================================================================

# Redis URL for caching
REDIS_URL=redis://localhost:6379

# Redis database number
REDIS_DB=0

# Redis connection timeout
REDIS_TIMEOUT=5000

# =============================================================================
# HSM CONFIGURATION (for production key management)
# =============================================================================

# HSM provider (aws-cloudhsm, azure-keyvault, etc.)
HSM_PROVIDER=mock

# AWS CloudHSM configuration
AWS_CLOUDHSM_CLUSTER_ID=cluster-1234567890abcdef0
AWS_CLOUDHSM_USER=crypto_user
AWS_CLOUDHSM_PASSWORD=your_hsm_password

# Azure Key Vault configuration
AZURE_KEYVAULT_URL=https://your-keyvault.vault.azure.net/
AZURE_CLIENT_ID=your_azure_client_id
AZURE_CLIENT_SECRET=your_azure_client_secret
AZURE_TENANT_ID=your_azure_tenant_id

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log level (error, warn, info, verbose, debug)
LOG_LEVEL=info

# Log format (json, simple)
LOG_FORMAT=json

# Log file path (leave empty to disable file logging)
LOG_FILE_PATH=./logs/attestation-service.log

# Maximum log file size in MB
LOG_MAX_SIZE=100

# Maximum number of log files to keep
LOG_MAX_FILES=5

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================

# Enable metrics collection
ENABLE_METRICS=true

# Metrics port (if different from main port)
METRICS_PORT=9090

# Health check timeout in milliseconds
HEALTH_CHECK_TIMEOUT=5000

# =============================================================================
# ZKP CIRCUIT CONFIGURATION
# =============================================================================

# Circuit version for compatibility
ZKP_CIRCUIT_VERSION=v1.0.0

# Maximum wage amount supported by circuit (in cents)
ZKP_MAX_WAGE_AMOUNT=1000000

# Proving key file path
ZKP_PROVING_KEY_PATH=./circuits/proving_key.zkey

# Verification key file path
ZKP_VERIFICATION_KEY_PATH=./circuits/verification_key.json

# =============================================================================
# EMPLOYER SIMULATION CONFIGURATION
# =============================================================================

# Enable mock employer simulation (development only)
ENABLE_EMPLOYER_SIMULATION=true

# Default number of employees per simulated employer
SIMULATION_EMPLOYEES_PER_EMPLOYER=100

# Error rate for simulation scenarios (0.0 to 1.0)
SIMULATION_ERROR_RATE=0.05

# =============================================================================
# WEBHOOK CONFIGURATION
# =============================================================================

# Webhook timeout in milliseconds
WEBHOOK_TIMEOUT=10000

# Maximum webhook retry attempts
WEBHOOK_MAX_RETRIES=3

# Webhook retry delay in milliseconds
WEBHOOK_RETRY_DELAY=5000

# =============================================================================
# BLOCKCHAIN CONFIGURATION (for on-chain verification)
# =============================================================================

# Ethereum RPC URL
ETHEREUM_RPC_URL=https://mainnet.infura.io/v3/your_infura_project_id

# Polygon RPC URL
POLYGON_RPC_URL=https://polygon-mainnet.infura.io/v3/your_infura_project_id

# Contract addresses for verification
ETHEREUM_VERIFIER_CONTRACT=0x1234567890123456789012345678901234567890
POLYGON_VERIFIER_CONTRACT=0x1234567890123456789012345678901234567890

# Gas limit for transactions
GAS_LIMIT=500000

# Gas price in wei
GAS_PRICE=20000000000

# =============================================================================
# EMAIL CONFIGURATION (for notifications)
# =============================================================================

# SMTP configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_password

# Email addresses
NOTIFICATION_FROM_EMAIL=noreply@stream-protocol.io
ADMIN_EMAIL=admin@stream-protocol.io

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================

# Payroll integration endpoints
PAYROLL_WEBHOOK_SECRET=your_payroll_webhook_secret

# Bank integration (for direct deposit monitoring)
BANK_API_KEY=your_bank_api_key
BANK_API_SECRET=your_bank_api_secret

# KYC provider configuration
KYC_PROVIDER_API_KEY=your_kyc_api_key
KYC_PROVIDER_BASE_URL=https://api.kycprovider.com

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================

# Enable debug mode
DEBUG=true

# Enable hot reload in development
HOT_RELOAD=true

# Enable request/response logging
LOG_REQUESTS=true

# Mock external services in development
MOCK_EXTERNAL_SERVICES=true

# =============================================================================
# TESTING CONFIGURATION
# =============================================================================

# Test database URL
TEST_DATABASE_URL=postgresql://user:password@localhost:5432/stream_attestations_test

# Test Redis URL
TEST_REDIS_URL=redis://localhost:6379/1

# Disable rate limiting in tests
DISABLE_RATE_LIMITING_IN_TESTS=true

# Test timeout in milliseconds
TEST_TIMEOUT=30000