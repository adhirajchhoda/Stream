exports.id=640,exports.ids=[640],exports.modules={1144:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},686:(e,t,r)=>{Promise.resolve().then(r.bind(r,4205))},9633:(e,t,r)=>{"use strict";r.d(t,{W:()=>l,m:()=>c});var a=r(326),i=r(7577);let o=(0,i.createContext)(void 0),s={flowState:"loading",currentTab:"dashboard",userRole:"employee",isAuthenticated:!1,hasCompletedOnboarding:!1};function n(e,t){switch(t.type){case"SET_FLOW_STATE":return{...e,flowState:t.payload};case"SET_CURRENT_TAB":return{...e,currentTab:t.payload};case"SET_USER_ROLE":return{...e,userRole:t.payload};case"SET_AUTHENTICATED":return{...e,isAuthenticated:t.payload};case"SET_ONBOARDING_COMPLETED":return{...e,hasCompletedOnboarding:t.payload};case"COMPLETE_ONBOARDING":return{...e,hasCompletedOnboarding:!0,flowState:"authentication"};case"AUTHENTICATE":return{...e,isAuthenticated:!0,flowState:"main"};case"LOGOUT":return{...e,isAuthenticated:!1,flowState:"authentication"};case"LOAD_PERSISTED_STATE":return{...e,...t.payload,flowState:"loading",isAuthenticated:t.payload.isAuthenticated||!1};default:return e}}function l({children:e}){let[t,r]=(0,i.useReducer)(n,s);return a.jsx(o.Provider,{value:{state:t,setFlowState:e=>r({type:"SET_FLOW_STATE",payload:e}),setCurrentTab:e=>r({type:"SET_CURRENT_TAB",payload:e}),setUserRole:e=>r({type:"SET_USER_ROLE",payload:e}),setAuthenticated:e=>r({type:"SET_AUTHENTICATED",payload:e}),setOnboardingCompleted:e=>r({type:"SET_ONBOARDING_COMPLETED",payload:e}),completeOnboarding:()=>r({type:"COMPLETE_ONBOARDING"}),authenticate:()=>r({type:"AUTHENTICATE"}),logout:()=>r({type:"LOGOUT"})},children:e})}function c(){let e=(0,i.useContext)(o);if(void 0===e)throw Error("useAppState must be used within an AppStateProvider");return e}},7883:(e,t,r)=>{"use strict";r.d(t,{dt:()=>u,$$:()=>m,L8:()=>h,ww:()=>y});var a=r(326),i=r(7577),o=r(7656);class s{static getInstance(){return s.instance||(s.instance=new s),s.instance}async startWorkSession(e,t,r){let a={id:`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,employeeId:e,startTime:new Date,hoursWorked:0,hourlyRate:t,isActive:!0,location:r,breaks:[]},i=this.workSessions.get(e)||[];return i.push(a),this.workSessions.set(e,i),await this.updateRealTimeEarnings(e),await this.addLedgerEntry({id:`ledger_${Date.now()}`,employeeId:e,type:"work_session",amount:0,description:"Work session started",timestamp:new Date,sessionId:a.id,verified:!1}),a}async endWorkSession(e,t){let r=this.workSessions.get(e)||[],a=r.findIndex(e=>e.id===t&&e.isActive);if(-1===a)throw Error("Active work session not found");let i=r[a],o=new Date,s=o.getTime()-i.startTime.getTime(),n=6e4*i.breaks.reduce((e,t)=>e+t.duration,0);i.endTime=o,i.hoursWorked=Math.max(0,s-n)/36e5,i.isActive=!1,r[a]=i,this.workSessions.set(e,r);let l=this.calculateSessionEarnings(i);return await this.updateRealTimeEarnings(e),await this.addLedgerEntry({id:`ledger_${Date.now()}`,employeeId:e,type:"work_session",amount:l.grossPay,description:`Work session completed - ${i.hoursWorked.toFixed(2)} hours`,timestamp:o,sessionId:i.id,verified:!1}),await this.generateSessionProof(i),i}async addBreak(e,t,r,a){let i=this.workSessions.get(e)||[],o=i.find(e=>e.id===t);if(!o)throw Error("Work session not found");let s=Math.max(0,(a.getTime()-r.getTime())/6e4);o.breaks.push({start:r,end:a,duration:s}),this.workSessions.set(e,i),await this.updateRealTimeEarnings(e)}calculateSessionEarnings(e){let t=Math.min(e.hoursWorked,this.settings.overtimeThreshold),r=Math.max(0,e.hoursWorked-this.settings.overtimeThreshold);return{grossPay:t*e.hourlyRate+r*e.hourlyRate*this.settings.overtimeMultiplier,regularHours:t,overtimeHours:r}}async updateRealTimeEarnings(e){let t=this.workSessions.get(e)||[],r=t.find(e=>e.isActive),a=0,i=0;if(t.filter(e=>!e.isActive).forEach(e=>{a+=e.hoursWorked;let t=this.calculateSessionEarnings(e);i+=t.grossPay}),r){let e=Math.max(0,(new Date().getTime()-r.startTime.getTime())/36e5-r.breaks.reduce((e,t)=>e+t.duration,0)/60);a+=e;let t=this.calculateSessionEarnings({...r,hoursWorked:e});i+=t.grossPay}let o=i*(this.settings.taxRate+this.settings.socialSecurityRate+this.settings.medicareRate),s=i-o,n=a*(r?.hourlyRate||0),l=5*n,c={employeeId:e,currentSessionId:r?.id,accumulatedHours:a,estimatedGrossPay:i,estimatedNetPay:s,availableForWithdrawal:.8*s,lastUpdated:new Date,projectedDailyEarnings:n,projectedWeeklyEarnings:l,projectedMonthlyEarnings:4.33*l};this.realTimeEarnings.set(e,c),this.notifyEarningsUpdate(e,c)}getRealTimeEarnings(e){return this.realTimeEarnings.get(e)||null}subscribeToEarningsUpdates(e,t){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t),()=>{let r=this.listeners.get(e);r&&(r.delete(t),0===r.size&&this.listeners.delete(e))}}notifyEarningsUpdate(e,t){let r=this.listeners.get(e);r&&r.forEach(e=>e(t))}async processWithdrawal(e,t){let r=this.realTimeEarnings.get(e);if(!r)throw Error("No earnings data found for employee");if(t<this.settings.minimumWithdrawal)throw Error(`Minimum withdrawal amount is $${this.settings.minimumWithdrawal}`);if(t>r.availableForWithdrawal)throw Error("Insufficient available balance for withdrawal");let a=t*this.settings.withdrawalFeePercentage,i=`withdrawal_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return await this.addLedgerEntry({id:`ledger_${Date.now()}`,employeeId:e,type:"withdrawal",amount:-t,description:`Instant withdrawal - $${(t-a).toFixed(2)} (fee: $${a.toFixed(2)})`,timestamp:new Date,verified:!1}),r.availableForWithdrawal-=t,this.realTimeEarnings.set(e,r),this.notifyEarningsUpdate(e,r),i}async generateSessionProof(e){try{let t={salary:e.hoursWorked*e.hourlyRate,hoursWorked:e.hoursWorked,hourlyRate:e.hourlyRate,periodStart:e.startTime,periodEnd:e.endTime||new Date,employeeId:e.employeeId,employerAttestation:"employer_verified"};await o.$.generateWorkHoursProof(t);let r=this.ledgerEntries.find(t=>t.sessionId===e.id&&"work_session"===t.type);r&&(r.verified=!0)}catch(e){console.error("Failed to generate session proof:",e)}}async addLedgerEntry(e){this.ledgerEntries.push(e)}getLedgerEntries(e){return this.ledgerEntries.filter(t=>t.employeeId===e)}getCurrentSession(e){return(this.workSessions.get(e)||[]).find(e=>e.isActive)||null}getAllSessions(e){return this.workSessions.get(e)||[]}updateSettings(e){this.settings={...this.settings,...e},Array.from(this.realTimeEarnings.keys()).forEach(e=>{this.updateRealTimeEarnings(e)})}getSettings(){return{...this.settings}}startRealTimeUpdates(e){let t=setInterval(async()=>{this.getCurrentSession(e)&&await this.updateRealTimeEarnings(e)},1e3);this[`interval_${e}`]=t}stopRealTimeUpdates(e){let t=this[`interval_${e}`];t&&(clearInterval(t),delete this[`interval_${e}`])}async verifyLedgerIntegrity(){return!0}constructor(){this.workSessions=new Map,this.realTimeEarnings=new Map,this.payrollEntries=new Map,this.ledgerEntries=[],this.settings={overtimeThreshold:40,overtimeMultiplier:1.5,taxRate:.22,socialSecurityRate:.062,medicareRate:.0145,withdrawalFeePercentage:.01,minimumWithdrawal:10,currency:"USD"},this.listeners=new Map}}let n=s.getInstance();var l=r(9633);let c=(0,i.createContext)(void 0),d={currentSession:null,realTimeEarnings:null,sessions:[],ledgerEntries:[],isSessionActive:!1,sessionStartTime:null,elapsedTime:0,isLoading:!1,error:null,settings:n.getSettings()};function p(e,t){switch(t.type){case"SET_LOADING":return{...e,isLoading:t.payload};case"SET_ERROR":return{...e,error:t.payload};case"SET_CURRENT_SESSION":return{...e,currentSession:t.payload,isSessionActive:t.payload?.isActive||!1};case"SET_REAL_TIME_EARNINGS":return{...e,realTimeEarnings:t.payload};case"SET_SESSIONS":return{...e,sessions:t.payload};case"SET_LEDGER_ENTRIES":return{...e,ledgerEntries:t.payload};case"UPDATE_ELAPSED_TIME":return{...e,elapsedTime:t.payload};case"SET_SETTINGS":return{...e,settings:t.payload};case"SESSION_STARTED":return{...e,currentSession:t.payload.session,isSessionActive:!0,sessionStartTime:t.payload.startTime,elapsedTime:0};case"SESSION_ENDED":return{...e,currentSession:null,isSessionActive:!1,sessionStartTime:null,elapsedTime:0};default:return e}}function u({children:e}){let[t,r]=(0,i.useReducer)(p,d),{state:o}=(0,l.m)(),s="employee"===o.userRole?"current_user":"",u=(0,i.useCallback)(async(e,t)=>{if(!s)throw Error("Employee ID not available");r({type:"SET_LOADING",payload:!0}),r({type:"SET_ERROR",payload:null});try{let a=await n.startWorkSession(s,e,t);r({type:"SESSION_STARTED",payload:{session:a,startTime:a.startTime}}),await f()}catch(e){throw r({type:"SET_ERROR",payload:e.message||"Failed to start work session"}),e}finally{r({type:"SET_LOADING",payload:!1})}},[s]),h=(0,i.useCallback)(async()=>{if(!s||!t.currentSession)throw Error("No active work session");r({type:"SET_LOADING",payload:!0}),r({type:"SET_ERROR",payload:null});try{await n.endWorkSession(s,t.currentSession.id),r({type:"SESSION_ENDED"}),await f()}catch(e){throw r({type:"SET_ERROR",payload:e.message||"Failed to end work session"}),e}finally{r({type:"SET_LOADING",payload:!1})}},[s,t.currentSession]),y=(0,i.useCallback)(async(e,a)=>{if(!s||!t.currentSession)throw Error("No active work session");r({type:"SET_ERROR",payload:null});try{await n.addBreak(s,t.currentSession.id,e,a);let i=n.getCurrentSession(s);r({type:"SET_CURRENT_SESSION",payload:i})}catch(e){throw r({type:"SET_ERROR",payload:e.message||"Failed to add break"}),e}},[s,t.currentSession]),m=(0,i.useCallback)(async e=>{if(!s)throw Error("Employee ID not available");r({type:"SET_LOADING",payload:!0}),r({type:"SET_ERROR",payload:null});try{let t=await n.processWithdrawal(s,e);return await f(),t}catch(e){throw r({type:"SET_ERROR",payload:e.message||"Withdrawal failed"}),e}finally{r({type:"SET_LOADING",payload:!1})}},[s]),E=(0,i.useCallback)(e=>{n.updateSettings(e),r({type:"SET_SETTINGS",payload:n.getSettings()})},[]),f=(0,i.useCallback)(async()=>{if(s){r({type:"SET_LOADING",payload:!0});try{let e=n.getCurrentSession(s);r({type:"SET_CURRENT_SESSION",payload:e});let t=n.getAllSessions(s);r({type:"SET_SESSIONS",payload:t});let a=n.getRealTimeEarnings(s);r({type:"SET_REAL_TIME_EARNINGS",payload:a});let i=n.getLedgerEntries(s);r({type:"SET_LEDGER_ENTRIES",payload:i});let o=n.getSettings();r({type:"SET_SETTINGS",payload:o})}catch(e){r({type:"SET_ERROR",payload:e.message||"Failed to refresh data"})}finally{r({type:"SET_LOADING",payload:!1})}}},[s]),g=(0,i.useCallback)(()=>{r({type:"SET_ERROR",payload:null})},[]);return a.jsx(c.Provider,{value:{state:t,startWorkSession:u,endWorkSession:h,addBreak:y,processWithdrawal:m,updateSettings:E,refreshData:f,clearError:g},children:e})}function h(){let e=(0,i.useContext)(c);if(void 0===e)throw Error("usePayroll must be used within a PayrollProvider");return e}function y(){let{state:e}=h();return e.realTimeEarnings}function m(){let{state:e}=h();return{session:e.currentSession,isActive:e.isSessionActive,elapsedTime:e.elapsedTime,startTime:e.sessionStartTime}}},9397:(e,t,r)=>{"use strict";r.d(t,{O:()=>p,n:()=>d});var a=r(326),i=r(7577),o=r(5320);let s=(0,i.createContext)(void 0),n=[{chainId:1,name:"Ethereum Mainnet",rpcUrl:"https://mainnet.infura.io/v3/YOUR_KEY",symbol:"ETH"},{chainId:137,name:"Polygon Mainnet",rpcUrl:"https://polygon-rpc.com",symbol:"MATIC"},{chainId:11155111,name:"Sepolia Testnet",rpcUrl:"https://sepolia.infura.io/v3/YOUR_KEY",symbol:"SEP"},{chainId:31337,name:"Hardhat Local",rpcUrl:"http://localhost:8545",symbol:"ETH"}],l={connectedWallet:null,connectionStatus:"disconnected",supportedChains:n,balance:"0",isConnecting:!1,error:null};function c(e,t){switch(t.type){case"SET_CONNECTING":return{...e,isConnecting:t.payload,error:t.payload?null:e.error};case"SET_CONNECTED":return{...e,connectedWallet:t.payload,connectionStatus:"connected",isConnecting:!1,error:null};case"SET_DISCONNECTED":return{...e,connectedWallet:null,connectionStatus:"disconnected",isConnecting:!1,balance:"0",error:null};case"SET_CONNECTION_STATUS":return{...e,connectionStatus:t.payload};case"SET_BALANCE":return{...e,balance:t.payload};case"SET_ERROR":return{...e,error:t.payload,isConnecting:!1,connectionStatus:t.payload?"error":e.connectionStatus};case"SET_SUPPORTED_CHAINS":return{...e,supportedChains:t.payload};default:return e}}function d({children:e}){let[t,r]=(0,i.useReducer)(c,l),d=(0,i.useCallback)(async()=>{if(!window.ethereum){r({type:"SET_ERROR",payload:"MetaMask is not installed. Please install MetaMask to continue."});return}r({type:"SET_CONNECTING",payload:!0});try{let e=await window.ethereum.request({method:"eth_requestAccounts"});if(0===e.length)throw Error("No accounts found");let t=await window.ethereum.request({method:"eth_chainId"}),a={address:e[0],chainId:parseInt(t,16),isConnected:!0};r({type:"SET_CONNECTED",payload:a}),await h(e[0])}catch(t){let e="Failed to connect wallet";4001===t.code?e="Connection rejected by user":-32002===t.code&&(e="Connection request pending. Please check MetaMask."),r({type:"SET_ERROR",payload:e}),console.error("Wallet connection error:",t)}},[]),p=(0,i.useCallback)(()=>{r({type:"SET_DISCONNECTED"}),localStorage.removeItem("stream-wallet-connection")},[]),u=(0,i.useCallback)(async e=>{if(!window.ethereum)throw Error("MetaMask is not available");try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:`0x${e.toString(16)}`}]})}catch(t){if(4902===t.code){let t=n.find(t=>t.chainId===e);t&&await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:`0x${e.toString(16)}`,chainName:t.name,rpcUrls:[t.rpcUrl],nativeCurrency:{name:t.symbol,symbol:t.symbol,decimals:18}}]})}else throw t}},[]),h=async e=>{try{if(window.ethereum){let t=await window.ethereum.request({method:"eth_getBalance",params:[e,"latest"]}),a=o.dF(t);r({type:"SET_BALANCE",payload:a})}}catch(e){console.error("Error getting balance:",e)}},y=(0,i.useCallback)(async()=>{if(!t.connectedWallet)throw Error("Wallet not connected");return await h(t.connectedWallet.address),t.balance},[t.connectedWallet,t.balance]),m=(0,i.useCallback)(async e=>{if(!window.ethereum||!t.connectedWallet)throw Error("Wallet not connected");try{return await window.ethereum.request({method:"personal_sign",params:[e,t.connectedWallet.address]})}catch(e){throw console.error("Error signing message:",e),e}},[t.connectedWallet]),E=(0,i.useCallback)(async(e,r)=>{if(!window.ethereum||!t.connectedWallet)throw Error("Wallet not connected");try{return await window.ethereum.request({method:"eth_sendTransaction",params:[{from:t.connectedWallet.address,to:e,value:o.fi(r).toString(16)}]})}catch(e){throw console.error("Error sending transaction:",e),e}},[t.connectedWallet]);return a.jsx(s.Provider,{value:{state:t,connectWallet:d,disconnectWallet:p,switchNetwork:u,getBalance:y,signMessage:m,sendTransaction:E},children:e})}function p(){let e=(0,i.useContext)(s);if(void 0===e)throw Error("useWallet must be used within a WalletProvider");return e}},6644:(e,t,r)=>{"use strict";r.d(t,{W:()=>u,l:()=>p});var a=r(326),i=r(7577),o=r.n(i),s=r(7656),n=r(9397);let l=(0,i.createContext)(void 0),c={activeProofs:[],completedProofs:[],proofStats:{totalGenerated:0,successRate:100,averageTime:0,byStatus:{generating:0,completed:0,failed:0,verifying:0}},isGenerating:!1,generationProgress:0,currentProofId:null,error:null};function d(e,t){switch(t.type){case"START_GENERATION":return{...e,isGenerating:!0,generationProgress:0,currentProofId:t.payload.proofId,error:null};case"UPDATE_PROGRESS":return{...e,generationProgress:t.payload};case"GENERATION_SUCCESS":{let r=t.payload,a=e.activeProofs.filter(e=>e.id!==r.id),i=[...e.completedProofs,r];return{...e,activeProofs:a,completedProofs:i,isGenerating:!1,generationProgress:100,currentProofId:null}}case"GENERATION_FAILED":{let{proofId:r,error:a}=t.payload,i=e.activeProofs.map(e=>e.id===r?{...e,status:"failed"}:e);return{...e,activeProofs:i,isGenerating:!1,generationProgress:0,currentProofId:null,error:a}}case"UPDATE_PROOF_STATUS":{let{id:r,status:a}=t.payload,i=e=>e.map(e=>e.id===r?{...e,status:a}:e);return{...e,activeProofs:i(e.activeProofs),completedProofs:i(e.completedProofs)}}case"SET_ERROR":return{...e,error:t.payload};case"LOAD_PROOFS":let r=t.payload,a=r.filter(e=>"generating"===e.status||"verifying"===e.status),i=r.filter(e=>"completed"===e.status||"failed"===e.status);return{...e,activeProofs:a,completedProofs:i};case"UPDATE_STATS":return{...e,proofStats:t.payload};default:return e}}function p({children:e}){let[t,r]=(0,i.useReducer)(d,c),{state:p}=(0,n.O)(),[u,h]=o().useState(!1),y=(0,i.useCallback)(async e=>{if(!u)throw Error("WebAssembly not supported in this browser");let t=`proof_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,a={id:t,title:"Salary Proof",subtitle:`${e.hoursWorked}h @ $${e.hourlyRate}/hr`,amount:e.wageAmount,status:"generating",progress:0,createdAt:new Date,proofType:"wage_proof",generationTime:0,circuitVersion:"v1.0.0",circuitId:"salary_v1",publicSignalsCount:4};r({type:"START_GENERATION",payload:{proofId:t}});try{let t=Date.now();r({type:"UPDATE_PROGRESS",payload:10});let i={salary:e.wageAmount,hoursWorked:e.hoursWorked,hourlyRate:e.hourlyRate,periodStart:new Date(e.timestamp.getTime()-6048e5),periodEnd:e.timestamp,employeeId:e.nullifier,employerAttestation:"employer_signature_placeholder"};r({type:"UPDATE_PROGRESS",payload:30});let o=await s.$.generateSalaryProof(i);r({type:"UPDATE_PROGRESS",payload:80});let n=(Date.now()-t)/1e3,l={proof:{pi_a:o.proof.pi_a,pi_b:o.proof.pi_b,pi_c:o.proof.pi_c,protocol:"groth16",curve:"bn254"},publicSignals:o.publicSignals,metadata:{circuitId:"salary_v1",provingTime:n,verificationKey:JSON.stringify(o.verificationKey),publicInputs:{wageAmount:String(Math.floor(1e18*e.wageAmount)),nullifierHash:e.nullifier}}};r({type:"UPDATE_PROGRESS",payload:100});let c={...a,status:"completed",progress:100,generationTime:n};return r({type:"GENERATION_SUCCESS",payload:c}),l}catch(e){throw r({type:"GENERATION_FAILED",payload:{proofId:t,error:e.message||"Proof generation failed"}}),e}},[u]),m=(0,i.useCallback)(async e=>{if(!u)throw Error("WebAssembly not supported in this browser");try{return await s.$.generateSalaryProof(e)}catch(e){throw r({type:"SET_ERROR",payload:e.message}),e}},[u]),E=(0,i.useCallback)(async e=>{if(!u)throw Error("WebAssembly not supported in this browser");try{return await s.$.generateWorkHoursProof(e)}catch(e){throw r({type:"SET_ERROR",payload:e.message}),e}},[u]),f=(0,i.useCallback)(async e=>{if(!u)throw Error("WebAssembly not supported in this browser");try{return await s.$.generateEmploymentProof(e)}catch(e){throw r({type:"SET_ERROR",payload:e.message}),e}},[u]),g=(0,i.useCallback)(async(e,t)=>{if("connected"!==p.connectionStatus||!p.connectedWallet)throw Error("Wallet not connected");try{return await s.$.submitProofToBlockchain(e,t,null)}catch(e){throw r({type:"SET_ERROR",payload:e.message}),e}},[p.connectionStatus,p.connectedWallet]),S=(0,i.useCallback)(async e=>{if(!u)return console.warn("WebAssembly not supported, skipping verification"),!1;try{let t={pi_a:e.proof.pi_a,pi_b:e.proof.pi_b,pi_c:e.proof.pi_c},r="salary";return e.metadata.circuitId.includes("work_hours")?r="workHours":e.metadata.circuitId.includes("employment")&&(r="employment"),await s.$.verifyProof(r,t,e.publicSignals)}catch(e){return console.error("Proof verification failed:",e),!1}},[u]),w=(0,i.useCallback)(e=>[...t.activeProofs,...t.completedProofs].find(t=>t.id===e)||null,[t.activeProofs,t.completedProofs]),T=(0,i.useCallback)((e,t)=>{r({type:"UPDATE_PROOF_STATUS",payload:{id:e,status:t}})},[]),_=(0,i.useCallback)(()=>{r({type:"SET_ERROR",payload:null})},[]);return a.jsx(l.Provider,{value:{state:t,generateProof:y,generateSalaryProof:m,generateWorkHoursProof:E,generateEmploymentProof:f,verifyProof:S,submitProofToBlockchain:g,getProofById:w,updateProofStatus:T,clearError:_,isZKSupported:u},children:e})}function u(){let e=(0,i.useContext)(l);if(void 0===e)throw Error("useZKProof must be used within a ZKProofProvider");return e}},4205:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>u});var a=r(326);r(7577);var i=r(4951),o=r(4976),s=r(381),n=r(9397),l=r(9633),c=r(6644),d=r(7883);let p=new i.S({defaultOptions:{queries:{staleTime:6e4,gcTime:3e5,retry:(e,t)=>t?.status!==401&&e<3,refetchOnWindowFocus:!1}}});function u({children:e}){return a.jsx(o.aH,{client:p,children:a.jsx(l.W,{children:a.jsx(n.n,{children:a.jsx(c.l,{children:(0,a.jsxs)(d.dt,{children:[e,a.jsx(s.x7,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#FFFFFF",color:"#1A1A1A",borderRadius:"12px",border:"1px solid #E0E4E7",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.06)",fontSize:"14px",fontWeight:"500"},success:{iconTheme:{primary:"#10B981",secondary:"#FFFFFF"}},error:{iconTheme:{primary:"#EF4444",secondary:"#FFFFFF"}}}}),!1]})})})})})}},7656:(e,t,r)=>{"use strict";r.d(t,{$:()=>l});var a=r(4817),i=r(1112),o=r(2021),s=r(4251);class n{async initialize(){if(!this.isInitialized)try{let e=await r.e(645).then(r.bind(r,4645));this.snarkjs=e.default||e,this.isInitialized=!0}catch(e){throw console.error("Failed to initialize ZK proof service:",e),Error("ZK proof service initialization failed")}}async generateSalaryProof(e){await this.initialize();try{let t=this.prepareSalaryCircuitInput(e),{proof:r,publicSignals:a}=await this.snarkjs.groth16.fullProve(t,this.circuits.salary.wasmPath,this.circuits.salary.zkeyPath),i=await this.loadVerificationKey("salary"),o=this.generateProofHash(r,a);return{proof:{pi_a:[r.pi_a[0],r.pi_a[1]],pi_b:[[r.pi_b[0][1],r.pi_b[0][0]],[r.pi_b[1][1],r.pi_b[1][0]]],pi_c:[r.pi_c[0],r.pi_c[1]]},publicSignals:a,verificationKey:i,proofHash:o}}catch(e){throw console.error("Failed to generate salary proof:",e),Error("Salary proof generation failed")}}async generateWorkHoursProof(e){await this.initialize();try{let t=this.prepareWorkHoursCircuitInput(e),{proof:r,publicSignals:a}=await this.snarkjs.groth16.fullProve(t,this.circuits.workHours.wasmPath,this.circuits.workHours.zkeyPath),i=await this.loadVerificationKey("workHours"),o=this.generateProofHash(r,a);return{proof:{pi_a:[r.pi_a[0],r.pi_a[1]],pi_b:[[r.pi_b[0][1],r.pi_b[0][0]],[r.pi_b[1][1],r.pi_b[1][0]]],pi_c:[r.pi_c[0],r.pi_c[1]]},publicSignals:a,verificationKey:i,proofHash:o}}catch(e){throw console.error("Failed to generate work hours proof:",e),Error("Work hours proof generation failed")}}async generateEmploymentProof(e){await this.initialize();try{let t=this.prepareEmploymentCircuitInput(e),{proof:r,publicSignals:a}=await this.snarkjs.groth16.fullProve(t,this.circuits.employment.wasmPath,this.circuits.employment.zkeyPath),i=await this.loadVerificationKey("employment"),o=this.generateProofHash(r,a);return{proof:{pi_a:[r.pi_a[0],r.pi_a[1]],pi_b:[[r.pi_b[0][1],r.pi_b[0][0]],[r.pi_b[1][1],r.pi_b[1][0]]],pi_c:[r.pi_c[0],r.pi_c[1]]},publicSignals:a,verificationKey:i,proofHash:o}}catch(e){throw console.error("Failed to generate employment proof:",e),Error("Employment proof generation failed")}}async verifyProof(e,t,r){await this.initialize();try{let a=await this.loadVerificationKey(e);return await this.snarkjs.groth16.verify(a,r,t)}catch(e){return console.error("Failed to verify proof:",e),!1}}async submitProofToBlockchain(e,t,r){try{if(!r)throw Error("Signer not available");let o=new a.CH(t,["function submitProof(uint256[2] calldata _pA, uint256[2][2] calldata _pB, uint256[2] calldata _pC, uint256[] calldata _publicSignals) external returns (bool)"],r),s=[(0,i.yT)(e.proof.pi_a[0]),(0,i.yT)(e.proof.pi_a[1])],n=[[(0,i.yT)(e.proof.pi_b[0][0]),(0,i.yT)(e.proof.pi_b[0][1])],[(0,i.yT)(e.proof.pi_b[1][0]),(0,i.yT)(e.proof.pi_b[1][1])]],l=[(0,i.yT)(e.proof.pi_c[0]),(0,i.yT)(e.proof.pi_c[1])],c=e.publicSignals.map(e=>(0,i.yT)(e)),d=await o.submitProof(s,n,l,c);return await d.wait(),d.hash}catch(e){throw console.error("Failed to submit proof to blockchain:",e),Error("Blockchain proof submission failed")}}prepareSalaryCircuitInput(e){return{salary:e.salary.toString(),hoursWorked:e.hoursWorked.toString(),hourlyRate:Math.floor(100*e.hourlyRate).toString(),periodStart:Math.floor(e.periodStart.getTime()/1e3).toString(),periodEnd:Math.floor(e.periodEnd.getTime()/1e3).toString(),employeeId:this.hashToFieldElement(e.employeeId),employerAttestation:this.hashToFieldElement(e.employerAttestation)}}prepareWorkHoursCircuitInput(e){return{hoursWorked:e.hoursWorked.toString(),periodStart:Math.floor(e.periodStart.getTime()/1e3).toString(),periodEnd:Math.floor(e.periodEnd.getTime()/1e3).toString(),employeeId:this.hashToFieldElement(e.employeeId),minimumHours:"40",employerAttestation:this.hashToFieldElement(e.employerAttestation)}}prepareEmploymentCircuitInput(e){return{employeeId:this.hashToFieldElement(e.employeeId),employerAttestation:this.hashToFieldElement(e.employerAttestation),startDate:Math.floor(e.periodStart.getTime()/1e3).toString(),isActive:"1"}}async loadVerificationKey(e){try{let t=await fetch(this.circuits[e].verificationKeyPath);return await t.json()}catch(t){throw console.error(`Failed to load verification key for ${e}:`,t),Error(`Verification key loading failed for ${e}`)}}generateProofHash(e,t){let r=JSON.stringify({proof:e,publicSignals:t});return(0,o.w)((0,s.Y0)(r))}hashToFieldElement(e){let t=(0,o.w)((0,s.Y0)(e));return((0,i.yT)(t)%BigInt("21888242871839275222246405745257275088548364400416034343698204186575808495617")).toString()}static isWebAssemblySupported(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){let e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e) instanceof WebAssembly.Instance}}catch(e){}return!1}getCircuitInfo(e){return this.circuits[e]}async preloadCircuits(){await this.initialize();let e=Object.keys(this.circuits);await Promise.all(e.map(async e=>{try{await this.loadVerificationKey(e),console.log(`Preloaded verification key for ${e}`)}catch(t){console.warn(`Failed to preload verification key for ${e}:`,t)}}))}constructor(){this.circuits={salary:{wasmPath:"/circuits/salary.wasm",zkeyPath:"/circuits/salary_final.zkey",verificationKeyPath:"/circuits/salary_verification_key.json"},workHours:{wasmPath:"/circuits/work_hours.wasm",zkeyPath:"/circuits/work_hours_final.zkey",verificationKeyPath:"/circuits/work_hours_verification_key.json"},employment:{wasmPath:"/circuits/employment.wasm",zkeyPath:"/circuits/employment_final.zkey",verificationKeyPath:"/circuits/employment_verification_key.json"}},this.snarkjs=null,this.isInitialized=!1}}let l=new n},6539:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,metadata:()=>n});var a=r(9510),i=r(5317),o=r.n(i);r(5023);let s=(0,r(8570).createProxy)(String.raw`/Users/ashwathreddymuppa/Stream/web-app/src/providers/index.tsx#Providers`),n={title:"Stream Protocol - Real-time Earned Wage Access",description:"Revolutionary earned wage access platform using Zero-Knowledge Proofs for instant, private wage advances.",keywords:["payroll","earned wage access","zk-proofs","blockchain","defi"],authors:[{name:"Stream Protocol Team"}],creator:"Stream Protocol",publisher:"Stream Protocol",formatDetection:{email:!1,address:!1,telephone:!1},metadataBase:new URL("https://app.streamprotocol.com"),openGraph:{title:"Stream Protocol - Real-time Earned Wage Access",description:"Revolutionary earned wage access platform using Zero-Knowledge Proofs for instant, private wage advances.",url:"https://app.streamprotocol.com",siteName:"Stream Protocol",images:[{url:"/og-image.png",width:1200,height:630,alt:"Stream Protocol"}],locale:"en_US",type:"website"},twitter:{card:"summary_large_image",title:"Stream Protocol - Real-time Earned Wage Access",description:"Revolutionary earned wage access platform using Zero-Knowledge Proofs for instant, private wage advances.",images:["/og-image.png"]},robots:{index:!0,follow:!0,googleBot:{index:!0,follow:!0,"max-video-preview":-1,"max-image-preview":"large","max-snippet":-1}},verification:{google:"google-site-verification-code"}};function l({children:e}){return(0,a.jsxs)("html",{lang:"en",suppressHydrationWarning:!0,children:[(0,a.jsxs)("head",{children:[a.jsx("link",{rel:"icon",href:"/favicon.ico"}),a.jsx("link",{rel:"apple-touch-icon",href:"/apple-touch-icon.png"}),a.jsx("link",{rel:"manifest",href:"/manifest.json"}),a.jsx("meta",{name:"theme-color",content:"#2196F3"}),a.jsx("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),a.jsx("meta",{name:"apple-mobile-web-app-status-bar-style",content:"default"}),a.jsx("meta",{name:"mobile-web-app-capable",content:"yes"})]}),a.jsx("body",{className:`${o().className} antialiased bg-white text-charcoal min-h-screen`,children:a.jsx(s,{children:a.jsx("div",{id:"root",children:e})})})]})}},5023:()=>{}};